# Health Diary REST API - HTTP requests for testing endpoints
# Used with VS Code's REST Client extension:
# <https://marketplace.visualstudio.com/items?itemName=humao.rest-client>

##
## /api/entries endpoint
##

### Get all entries
GET http://localhost:3000/api/entries
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJ1c2VybmFtZSI6ImpvaG5kb2UiLCJlbWFpbCI6ImpvaG5kb2VAZXhhbXBsZS5jb20iLCJjcmVhdGVkX2F0IjoiMjAyNC0wMS0wMVQwNzowMDowMC4wMDBaIiwidXNlcl9sZXZlbCI6InJlZ3VsYXIiLCJpYXQiOjE3MTA2ODcwMTgsImV4cCI6MTcxMDc3MzQxOH0.L6fvkv4i6jJe4tfND5H4J1-Nn-40Z7UOSYWAjATYfKA

### Get entries by id
GET http://localhost:3000/api/entries/5

### Get entries by id 404
GET http://localhost:3000/api/entries/invalidID

### Post entry
POST http://localhost:3000/api/entries
content-type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJ1c2VybmFtZSI6ImpvaG5kb2UiLCJlbWFpbCI6ImpvaG5kb2VAZXhhbXBsZS5jb20iLCJjcmVhdGVkX2F0IjoiMjAyNC0wMS0wMVQwNzowMDowMC4wMDBaIiwidXNlcl9sZXZlbCI6InJlZ3VsYXIiLCJpYXQiOjE3MTA2ODcwMTgsImV4cCI6MTcxMDc3MzQxOH0.L6fvkv4i6jJe4tfND5H4J1-Nn-40Z7UOSYWAjATYfKA


{
  "entry_date": "2024-03-17",
  "mood": "Happy",
  "weight": 69.69,
  "sleep_hours": 7,
  "notes": "This was a great day, but does this req fail?",
  "user_id": 3
}

### Post entry FAIL
POST http://localhost:3000/api/entries
content-type: application/json

{"msg": "HEllo"}

### Update entry
PUT http://localhost:3000/api/entries/5
content-type: application/json

{
  "entry_date": "2024-02-12",
  "mood": "Even more happy now",
  "weight": 69.69,
  "sleep_hours": 7,
  "notes": "This was a good day",
  "user_id": 3
}

### Update entry FAIL
PUT http://localhost:3000/api/entries/5
content-type: application/json

{
  "something": "this will fail, invalid fields"
}

### Delete entry
DELETE http://localhost:3000/api/entries/14

##
## /api/users endpoint
##

### Get all users
GET http://localhost:3000/api/users
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJ1c2VybmFtZSI6ImpvaG5kb2UiLCJlbWFpbCI6ImpvaG5kb2VAZXhhbXBsZS5jb20iLCJjcmVhdGVkX2F0IjoiMjAyNC0wMS0wMVQwNzowMDowMC4wMDBaIiwidXNlcl9sZXZlbCI6InJlZ3VsYXIiLCJpYXQiOjE3MTA2ODcwMTgsImV4cCI6MTcxMDc3MzQxOH0.L6fvkv4i6jJe4tfND5H4J1-Nn-40Z7UOSYWAjATYfKA


### Get user by id
GET http://localhost:3000/api/users/1
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJ1c2VybmFtZSI6ImpvaG5kb2UiLCJlbWFpbCI6ImpvaG5kb2VAZXhhbXBsZS5jb20iLCJjcmVhdGVkX2F0IjoiMjAyNC0wMS0wMVQwNzowMDowMC4wMDBaIiwidXNlcl9sZXZlbCI6InJlZ3VsYXIiLCJpYXQiOjE3MTA3OTIxMjMsImV4cCI6MTcxMDg3ODUyM30.IoOwebNXE9k6lmqZaWnxmvdkOZo3bJP2Sp84Us4BgIA


### Get user by id FAIL
GET http://localhost:3000/api/users/invalidID

### Post users (create a new user)
POST http://localhost:3000/api/users
content-type: application/json

{
  "username": "test-newuser",
  "password": "testnewsecret",
  "email": "test.newuser@example.com"
}

### Post users FAIL
POST http://localhost:3000/api/users
content-type: application/json

{"msg": "bad request, missing fields"}

### Update user
PUT http://localhost:3000/api/users/19
content-type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxOSwidXNlcm5hbWUiOiJtdW9rYXR0YXZhIiwiZW1haWwiOiJtdW9rYXR0YXZhQG11b2thdHRhdmEuZmkiLCJjcmVhdGVkX2F0IjoiMjAyNC0wMy0xOFQyMDozMTo0Ny4wMDBaIiwidXNlcl9sZXZlbCI6InJlZ3VsYXIiLCJpYXQiOjE3MTA3OTQyMjYsImV4cCI6MTcxMDg4MDYyNn0.kqaw5FdDZux59m8faWCfou8t4rwPPkAUAswn7CNkI0I

{
  "username": "muokattava",
  "password": "muokattava",
  "email": "muokattava2@muokattava.fi"
}

### Update users FAIL
PUT http://localhost:3000/api/users/2
content-type: application/json

{
  "something": "this will fail"
}

### Delete user
DELETE http://localhost:3000/api/users/20
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyMCwidXNlcm5hbWUiOiJwb2lzdGV0YWFuMiIsImVtYWlsIjoicG9pc3RldGFhbjJAcG9pc3RldGFhbi5maSIsImNyZWF0ZWRfYXQiOiIyMDI0LTAzLTE4VDIxOjA4OjIyLjAwMFoiLCJ1c2VyX2xldmVsIjoicmVndWxhciIsImlhdCI6MTcxMDc5NjEzMCwiZXhwIjoxNzEwODgyNTMwfQ.IBCeJbikE2HJ_7OZ5Q5WqapgziuoxQOd1c9_U-aUrj8

### Post login
POST http://localhost:3000/api/users/login
content-type: application/json

{
  "username": "Newuser",
  "password": "newsecret"
}

### Post login FAIL
POST http://localhost:3000/api/users/login
content-type: application/json

{
  "username": "Newuser"
}

### Get details of logged in user (getME)
GET http://localhost:3000/api/auth/me
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxOCwidXNlcm5hbWUiOiJwb2lzdGV0YWFuIiwiZW1haWwiOiJwb2lzdGV0YWFuQHBvaXN0ZXRhYW4uZmkiLCJjcmVhdGVkX2F0IjoiMjAyNC0wMy0xOFQwMjozMTozNy4wMDBaIiwidXNlcl9sZXZlbCI6InJlZ3VsYXIiLCJpYXQiOjE3MTA3MjkxMDksImV4cCI6MTcxMDgxNTUwOX0.L5Rnzv67I2I-Ktkifr-MvjEU8h6gFBGgZtwrfO4aoDg
